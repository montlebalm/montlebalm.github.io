<!DOCTYPE html>
<html lang="en">
	<head>
		<title>ChrisMontrois</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Developer. Dude.">

		<link href='//fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="/css/base.css" rel="stylesheet" />

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="container">
			<div class="site-wrapper row">
				<header class="site-header clearfix">
					<div class="span2">
						<a href="http://chrismontrois.com/" accesskey="1" class="site-logo"></a>
					</div>
					<nav class="span8 row">
						<a href="/">Blog</a>
						<a href="/setup/">Setup</a>
						<a href="/about/">About</a>
					</nav>
				</header>
				<section class="site-content clearfix">

	<article class="clearfix">
		<header class="clearfix">
			<h1 class="span8">Javascript Closures</h1>
		</header>
		<div class="span8 post-content"><blockquote><p>"Javascript functions are a combination of code to be executed and the scope in which to execute them. This combination of code and scope is known as a closure..."</p>

<p>Excerpt from <em>Javascript: The Definitive Guide</em> by David Flanagan</p></blockquote>

<p>The basic definition of a closure is a function defined within a function. The behavior of these nested functions differs between programming languages based on their handling of scope. JavaScript employs a Lexical (static) scope, which means functions execute in the same context in which they are defined. Unlike dynamically scoped languages, JavaScript not only contains a pointer to the nested function, but a reference to its call object as well.</p>

<h1>Call object: forget me not</h1>

<p>JavaScript's Lexical scope allows closures to behave in seemingly counter-intuitive ways. Normally when a function exits, the interpreter releases its useless call object for garbage collection. However, if we set a nested function as the return value of a parent function, the interpreter must keep a reference to the parent's call object. This is required in order to provide the nested function with the scope in which it was defined. We can't access the stored object directly, but it will persist in memory until needed.</p>

<p>I have demonstrated the behavior of closures in the priceless flash card application below.</p>

<div class="highlight"><pre><code class="javascript"><span class="c1">// define the outer function</span>
<span class="kd">function</span> <span class="nx">flashCard</span><span class="p">(</span><span class="nx">question</span><span class="p">,</span> <span class="nx">answer</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// define our closure to ask the question</span>
  <span class="kd">function</span> <span class="nx">ask</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Question: &quot;</span> <span class="o">+</span> <span class="nx">question</span><span class="p">);</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Answer: &quot;</span> <span class="o">+</span> <span class="nx">answer</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// return the closure</span>
  <span class="k">return</span> <span class="nx">ask</span><span class="p">();</span>

<span class="p">}</span>

<span class="c1">// create a couple flash cards</span>
<span class="kd">var</span> <span class="nx">cards</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">flashCard</span><span class="p">(</span><span class="s2">&quot;Who was the 2nd president of the United States?&quot;</span><span class="p">,</span> <span class="s2">&quot;John Adams&quot;</span><span class="p">),</span>
  <span class="nx">flashCard</span><span class="p">(</span><span class="s2">&quot;What time is it?&quot;</span><span class="p">,</span> <span class="s2">&quot;It&#39;s Business Time&quot;</span><span class="p">)</span>
<span class="p">];</span>

<span class="c1">// call the closures</span>
<span class="nx">cards</span><span class="p">[</span><span class="mi">0</span><span class="p">]();</span> <span class="c1">// &quot;Who was the 2nd... &quot;</span>
<span class="nx">cards</span><span class="p">[</span><span class="mi">1</span><span class="p">]();</span> <span class="c1">// &quot;What time... &quot;</span>
</code></pre></div>


<p>If you've been following along you might correctly guess that the first closure call will display the first question/answer (the second call the second question/answer). Again, this is because <span class="code">ask()</span> is executing in the same scope in which it was defined. In this case, its scope includes the question and answer variables that we provided while defining its parent function.</p>

<p>Closures probably won't change your life, but they have some interesting uses.</p>

<p>For more information about practical application, read <a href="http://www.crockford.com/javascript/private.html">Douglas Crockford's piece on Private Members in JavaScript</a>.</p>
</div>
	</article>

				</section>
				<footer class="site-footer span8 offset2 clearfix">
					<nav>
						<!-- <a href="http://chrismontrois.com/archives.html">Archives</a> -->
						<!-- <a href="http://chrismontrois.com/atom.xml">Subscribe</a> -->
						<a href="/about/">About</a>
						<a href="/setup/">Setup</a>
						<a href="mailto:chris@chrismontrois.net">Email</a>
					</nav>
					<span>Chris Montrois Â© 2009-2013</span>
				</footer>
			</div>
		</div>
	</body>
</html>