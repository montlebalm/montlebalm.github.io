<!DOCTYPE html>
<html xmlns:cc="http://creativecommons.org/ns#">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A faster, smarter Quick Switcher — Several People Are Coding — Medium</title>
    <link rel="canonical" href="https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60">
    <meta name="title" content="A faster, smarter Quick Switcher — Several People Are Coding">
    <meta name="referrer" content="always">
    <meta name="description" content="We rewrote the Quick Switcher to dramatically improve performance and make it a whole lot easier to use. Here’s what we …">
    <meta property="og:site_name" content="Medium">
    <meta property="og:title" content="A faster, smarter Quick Switcher — Several People Are Coding">
    <meta property="og:url" content="https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60">
    <meta property="og:image" content="https://cdn-images-1.medium.com/max/800/1*VfY_n9_DS42MrbCrKpZEXw.jpeg">
    <meta property="fb:app_id" content="542599432471018">
    <meta property="og:description" content="We rewrote the Quick Switcher to dramatically improve performance and make it a whole lot easier to use. Here’s what we …">
    <meta name="twitter:site" content="@Medium">
    <meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/800/1*VfY_n9_DS42MrbCrKpZEXw.jpeg">
    <link rel="publisher" href="https://plus.google.com/103654360130207659246">
    <link rel="author" href="https://slack.engineering/@SlackEng">
    <meta name="author" content="Slack Engineering">
    <meta property="og:type" content="article">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="article:publisher" content="https://www.facebook.com/medium">
    <meta property="article:author" content="https://slack.engineering/@SlackEng">
    <meta property="fb:smart_publish:robots" content="noauto">
    <meta property="article:published_time" content="2016-01-25T18:57:50.501Z">
    <meta name="twitter:label1" value="Reading time">
    <meta name="twitter:data1" value="7 mins">
    <meta name="twitter:app:name:iphone" content="Medium">
    <meta name="twitter:app:id:iphone" content="828256236">
    <meta name="twitter:app:url:iphone" content="medium:/p/77cbc193cb60">
    <meta property="al:ios:app_name" content="Medium">
    <meta property="al:ios:app_store_id" content="828256236">
    <meta property="al:android:package" content="com.medium.reader">
    <meta property="al:android:app_name" content="Medium">
    <meta property="al:ios:url" content="medium:/p/77cbc193cb60">
    <meta property="al:android:url" content="medium://p/77cbc193cb60">
    <meta property="al:web:url" content="https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60">
    <link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/77cbc193cb60" />
    <meta name="theme-color" content="#000000">
    <link rel="stylesheet" type="text/css" href="https://cdn-static-1.medium.com/_/fp/css/fonts-base.LqXl5T9RMAR39Ge23ku50w.css" />
    <link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.ZpeuKfb0ohz14NBHcrtjew.css">
    <script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || []; _gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]); _asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]-->
    <link rel="shortcut icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-new.TAS6uQ-Y7kcKgi0xjcYHXw.ico">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-ipad-retina.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-ipad.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/favicon.svg" color="#171717">
  </head>
  <body itemscope itemtype="http://schema.org/Article" class=" template-flex-article browser-safari os-mac is-withMagicUnderlines is-noJs">
    <script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script>
    <div class="site-main" id="container">
      <div class="butterBar butterBar--error"></div>
      <div class="surface">
        <div id="prerendered" class="screenContent">
          <canvas class="canvas-renderer"></canvas>
          <nav class="metabar u-clearfix js-metabar metabar--top v-cardHomepage metabar--postArticle">
            <div class="metabar-block metabar-left u-floatLeft">
              <a href="https://medium.com/" class="siteNav-logo" data-log-event="home">
                <svg viewBox="0 0 45 45" width="45" height="45" class="svgIcon svgIcon--logoNew svgIcon-size--45px">
                  <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-logoNew-45px-p0"></use>
                  <use class="svgIcon-use svgIcon-use--part1" xlink:href="#svg-logoNew-45px-p1"></use>
                  <use class="svgIcon-use svgIcon-use--part2" xlink:href="#svg-logoNew-45px-p2"></use>
                  <use class="svgIcon-use svgIcon-use--part3" xlink:href="#svg-logoNew-45px-p3"></use>
                </svg>
                <span class="u-textScreenReader">Homepage</span>
              </a>
              <span class="metabar-divider metabar-divider--first u-showOnMobile"></span><span class="postMetaInline postMetaInline--avatar u-showOnMobile"><a class="link avatar avatar--roundedRectangle"  href="https://slack.engineering?source=avatarTopMetabar-lo_fc871eba2ce1-58820b6d8904" title="Go to Several People Are Coding" aria-label="Go to Several People Are Coding" data-action-source="avatarTopMetabar-lo_fc871eba2ce1-58820b6d8904"><img src="https://cdn-images-1.medium.com/fit/c/32/32/1*1mPvixjECYE4qm2L1EoNtA.png" class="avatar-image avatar-image--icon" alt="Several People Are Coding"></a></span>
            </div>
            <div class="metabar-block metabar-center"><a class="metabar-logoWrapper js-logCollection" href="https://slack.engineering?source=logo-lo_fc871eba2ce1-58820b6d8904"><img class="metabar-logo" src="https://cdn-images-1.medium.com/fit/c/300/36/1*SWg0qbhf5Y8M-KFU0diqvA.png?source=logoAvatar-lo_fc871eba2ce1-58820b6d8904" alt="Published in Several People Are Coding"/></a></div>
            <div class="metabar-block metabar-right u-floatRight">
              <div class="buttonSet"></div>
              <div class="inputGroup u-sm-hide metabar-predictiveSearch">
                <button class="button button--chromeless button--inline button--withIcon is-inSiteNavBar button--withSvgIcon"  title="Click to start typing a search term" aria-label="Click to start typing a search term" data-action="focus-search-input">
                  <svg viewBox="0 0 25 25" width="25" height="25" class="svgIcon svgIcon--search svgIcon-size--25px">
                    <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-search-25px-p0"></use>
                  </svg>
                </button>
                <input class="js-predictiveSearchInput textInput textInput--dark textInput--rounded" type="search" placeholder="Search Medium">
              </div>
              <div class="buttonSet">
                <button class="button button--circle button--withChrome button--withIcon is-inSiteNavBar u-showOnTablet button--withSvgIcon"  title="Search" aria-label="Search" data-action="open-search">
                  <svg viewBox="0 0 25 25" width="25" height="25" class="svgIcon svgIcon--search svgIcon-size--25px">
                    <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-search-25px-p0"></use>
                  </svg>
                </button>
                <a class="button button--primary button--withChrome"  href="https://medium.com/m/signin?redirect=https%3A%2F%2Fslack.engineering%2Fa-faster-smarter-quick-switcher-77cbc193cb60"data-action="sign-in-prompt"data-redirect="https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60" data-action-source="nav_signup">Sign in / Sign up</a>
              </div>
            </div>
          </nav>
          <div class="postActionsBar js-postActionsBar">
            <div class="postActionsBar-container container u-size740">
              <div class="postActionsBar-content row js-postActionsBarContent">
                <div class="postActions col u-xs-size12of12">
                  <div class="u-floatLeft buttonSet buttonSet--withLabels">
                    <div class="buttonSet-inner">
                      <div class="js-actionRecommend" data-post-id="77cbc193cb60" data-size="29px">
                        <button class="button button--primary button--large button--chromeless button--withIcon button--withSvgIcon"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it"data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/77cbc193cb60">
                          <span class="button-defaultState">
                            <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--heart svgIcon-size--29px">
                              <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-heart-29px-p0"></use>
                            </svg>
                          </span>
                          <span class="button-activeState">
                            <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--heartFilled svgIcon-size--29px">
                              <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-heartFilled-29px-p0"></use>
                            </svg>
                          </span>
                        </button>
                        <button class="button button--chromeless"  data-action="show-recommends" data-action-value="77cbc193cb60">189</button>
                      </div>
                    </div>
                    <div class="buttonSet-inner">
                      <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="scroll-to-responses">
                        <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--response svgIcon-size--29px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-response-29px-p0"></use>
                        </svg>
                      </button>
                      <button class="button button--chromeless"  data-action="scroll-to-responses">5</button>
                    </div>
                  </div>
                  <div class="u-floatRight buttonSet">
                    <div class="buttonSet-inner">
                      <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="share-on-twitter"value="77cbc193cb60">
                        <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--twitter svgIcon-size--29px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-twitter-29px-p0"></use>
                        </svg>
                      </button>
                    </div>
                    <div class="buttonSet-inner">
                      <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="share-on-facebook"value="77cbc193cb60">
                        <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--facebook svgIcon-size--29px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-facebook-29px-p0"></use>
                        </svg>
                      </button>
                    </div>
                    <div class="buttonSet-separator"></div>
                    <div class="buttonSet-inner"><a class="link avatar avatar--inline"  href="https://medium.com/@SlackEng" data-action="show-user-card" data-action-type="hover" data-user-id="28279a71b4f2" dir="auto"><img src="https://cdn-images-1.medium.com/fit/c/24/24/1*GB9girro1GFX16imhDm_wA.png" class="avatar-image avatar-image--micro" alt="Go to the profile of Slack Engineering"><span class="avatar-text">Slack Engineering</span></a><span class="u-xs-hide"><span class="middotDivider"></span><span class="followState js-followState" data-user-id="28279a71b4f2"><button class="button button--chromeless u-noUserSelect button--withHover button--unblock js-unblockButton" data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_actions_bar"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--chromeless u-noUserSelect button--follow js-followButton"  title="Follow to get new stories and recommendations from this author" aria-label="Follow to get new stories and recommendations from this author"data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/28279a71b4f2/77cbc193cb60" data-action-source="post_actions_bar_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <article class="u-sizeViewHeightMin100 postArticle postArticle--full" lang="en">
            <header class="container is-underMetabar u-size740">
              <div class="postMetaHeader row u-xs-top10 u-xs-bottom10">
                <div class="col u-xs-size5of12">
                  <div class="u-floatLeft">
                    <div class="postMetaInline-avatar"><a class="link avatar"  href="https://medium.com/@SlackEng" data-action="show-user-card" data-action-type="hover" data-user-id="28279a71b4f2" dir="auto"><img src="https://cdn-images-1.medium.com/fit/c/36/36/1*GB9girro1GFX16imhDm_wA.png" class="avatar-image u-xs-size32x32 u-sm-size36x36" alt="Go to the profile of Slack Engineering"></a></div>
                    <div class="postMetaInline-feedSummary"><a class="link link link--darken link--accent"  href="https://medium.com/@SlackEng" data-action="show-user-card" data-action-type="hover" data-user-id="28279a71b4f2" dir="auto">Slack Engineering</a><span class="postMetaInline postMetaInline--supplemental">Jan 25<span class="middotDivider"></span><span class="readingTime">8 min read</span></span></div>
                  </div>
                </div>
                <div class="col u-xs-size7of12">
                  <div class="u-floatRight">
                    <div class="postMetaHeader-socialProof"></div>
                  </div>
                </div>
              </div>
            </header>
            <main role="main" class="postArticle-content js-postField js-notesSource">
              <section name="3689" class=" section--body section--first">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider">
                </div>
                <div class="section-content">
                  <div class="section-inner u-sizeFullWidth">
                    <figure name="229a" id="229a" class="graf--figure graf--layoutFillWidth graf--first">
                      <div class="aspectRatioPlaceholder is-locked">
                        <div class="aspect-ratio-fill" style="padding-bottom: 42.6%;"></div>
                        <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*VfY_n9_DS42MrbCrKpZEXw.jpeg" data-width="3916" data-height="1669">
                          <img src="https://cdn-images-1.medium.com/freeze/max/30/1*VfY_n9_DS42MrbCrKpZEXw.jpeg?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/2000/1*VfY_n9_DS42MrbCrKpZEXw.jpeg">
                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/2000/1*VfY_n9_DS42MrbCrKpZEXw.jpeg"></noscript>
                        </div>
                      </div>
                      <figcaption class="imageCaption"><a href="https://www.flickr.com/photos/joi/494430235/" data-href="https://www.flickr.com/photos/joi/494430235/" class="markup--anchor markup--figure-anchor" rel="nofollow">Switches</a> by Joi Ito licensed under <a href="https://creativecommons.org/licenses/by/2.0/" data-href="https://creativecommons.org/licenses/by/2.0/" class="markup--anchor markup--figure-anchor" rel="nofollow">Creative Commons</a>. Cropped.</figcaption>
                    </figure>
                  </div>
                  <div class="section-inner layoutSingleColumn">
                    <h3 name="2763" id="2763" class="graf--h3 graf-after--figure">A faster, smarter Quick Switcher</h3>
                    <p name="7e16" id="7e16" class="graf--p graf-after--h3">By <a href="https://medium.com/u/7d14046f418e" data-href="https://medium.com/u/7d14046f418e" data-anchor-type="2" data-user-id="7d14046f418e" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user">Diogenes Brito</a>, <a href="https://medium.com/u/649dd4575453" data-href="https://medium.com/u/649dd4575453" data-anchor-type="2" data-user-id="649dd4575453" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user">Patrick Kane</a>, <a href="https://medium.com/u/3297dadd8b70" data-href="https://medium.com/u/3297dadd8b70" data-anchor-type="2" data-user-id="3297dadd8b70" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user">Johnny Rodgers</a>, and <a href="https://medium.com/u/4eea65c5f388" data-href="https://medium.com/u/4eea65c5f388" data-anchor-type="2" data-user-id="4eea65c5f388" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user">Kyle Stetz</a>.</p>
                    <p name="2420" id="2420" class="graf--p graf-after--p">Getting to the right conversation in Slack should be easy. And it should be fast. Like, <em class="markup--em markup--p-em">really fast</em>. When <a href="https://medium.com/@johnnyrodgersis/a-little-better-every-day-702d4849d968" data-href="https://medium.com/@johnnyrodgersis/a-little-better-every-day-702d4849d968" class="markup--anchor markup--p-anchor">we first released the Quick Switcher</a> in early 2014, we aimed to provide a way to quickly and easily switch to any channel or direct message you wanted. It was keyboard accessible (just press <strong class="markup--strong markup--p-strong">⌘+k</strong> on Mac or <strong class="markup--strong markup--p-strong">ctrl+k</strong> on Windows and Linux) and it made power users happy.</p>
                    <p name="aee9" id="aee9" class="graf--p graf-after--p">However, over time its shortcomings began to bother both us and our customers. It was awfully slow on large teams, taking several seconds to open in the worst cases. Even under good circumstances it could take 100 milliseconds to open — an eternity when capturing the next keystroke is important. It used an overly simplistic matching and sorting algorithm to find and order results. And it didn’t remember who you switched to, no matter how many times you picked the 4th Matt from the list.</p>
                    <figure name="39a5" id="39a5" class="graf--figure graf-after--p">
                      <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 500px;">
                        <div class="aspect-ratio-fill" style="padding-bottom: 71.39999999999999%;"></div>
                        <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*DRJpMrFQqwHIN8rh0CDklA.png" data-width="700" data-height="500">
                          <img src="https://cdn-images-1.medium.com/freeze/max/30/1*DRJpMrFQqwHIN8rh0CDklA.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*DRJpMrFQqwHIN8rh0CDklA.png">
                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*DRJpMrFQqwHIN8rh0CDklA.png"></noscript>
                        </div>
                      </div>
                    </figure>
                    <p name="69d2" id="69d2" class="graf--p graf-after--figure">When we turned our attention to fixing these problems, we had two key goals. The new Quick Switcher should</p>
                    <ul class="postList">
                      <li name="a5ad" id="a5ad" class="graf--li graf-after--p">Open nearly instantly, regardless of team size</li>
                      <li name="0016" id="0016" class="graf--li graf-after--li">Remember who and what you switch to and prioritize those results</li>
                    </ul>
                    <p name="a294" id="a294" class="graf--p graf-after--li graf--last">With these in mind, we got to work.</p>
                  </div>
                </div>
              </section>
              <section name="c753" class=" section--body">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider">
                </div>
                <div class="section-content">
                  <div class="section-inner layoutSingleColumn">
                    <h4 name="3605" id="3605" class="graf--h4 graf--first">Performance</h4>
                    <p name="81b8" id="81b8" class="graf--p graf-after--h4">We profiled the performance of the Quick Switcher to find out where we were spending the most time. There were three main culprits:</p>
                    <ol class="postList">
                      <li name="ab18" id="ab18" class="graf--li graf-after--p">Building and rendering long lists</li>
                      <li name="41eb" id="41eb" class="graf--li graf-after--li">Inefficient HTML building</li>
                      <li name="08c0" id="08c0" class="graf--li graf-after--li">No data prefetching and expensive sorting</li>
                    </ol>
                    <p name="168f" id="168f" class="graf--p graf-after--li">Each of these were fairly easy to remedy in isolation. For 1, don’t build a long list! Only show a user’s unread channels and direct messages on open, and limit those to a reasonable number — we settled on 24. This manageable list replaced the list of <strong class="markup--strong markup--p-strong">all </strong>of a team’s channels and members on open, the weight of which could be crushing on a large team.</p>
                    <p name="3a64" id="3a64" class="graf--p graf-after--p">To address 2, we templatized our HTML and reduced the number of DOM elements for the container and list items by simplifying the markup and harmonizing the presentation of each type.</p>
                    <p name="49fc" id="49fc" class="graf--p graf-after--p">Finally, we prefetched the data needed to search on open (rather than on keydown), and sorted it using a more efficient algorithm with fewer special cases to churn through.</p>
                    <p name="ffb0" id="ffb0" class="graf--p graf-after--p">When complete, we were able to routinely open the Quick Switcher in 7 milliseconds at the median, and render results in 12 milliseconds. By comparison, the original implementation took 85 milliseconds to open and 100 milliseconds to render results. We measure this and a variety of other performance data via our custom client-side timing code, which we log to LogStash and visualize with Kibana. Data is collected across all teams and team sizes.</p>
                    <figure name="b21d" id="b21d" class="graf--figure graf-after--p">
                      <div class="aspectRatioPlaceholder is-locked" style="max-width: 604px; max-height: 612px;">
                        <div class="aspect-ratio-fill" style="padding-bottom: 101.29999999999998%;"></div>
                        <div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*on6QoCfx2At6gn03Krmh1w.png" data-width="604" data-height="612">
                          <img src="https://cdn-images-1.medium.com/freeze/max/30/1*on6QoCfx2At6gn03Krmh1w.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail">
                          <canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas>
                          <img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*on6QoCfx2At6gn03Krmh1w.png">
                          <noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*on6QoCfx2At6gn03Krmh1w.png"></noscript>
                        </div>
                      </div>
                      <figcaption class="imageCaption">7ms median render time! For reference, 1 frame at 60fps is 16.67ms, and our goal was to clear it with some room to spare.</figcaption>
                    </figure>
                    <h4 name="87a0" id="87a0" class="graf--h4 graf-after--figure">Frecency: sorting by frequency + recency</h4>
                    <p name="4329" id="4329" class="graf--p graf-after--h4">With our performance woes in check, the next item to tackle was personalization. We wanted the Quick Switcher to remember and prioritize the direct messages and channels you actually use, rather than constantly showing you the same sorted list.</p>
                    <p name="c0bd" id="c0bd" class="graf--p graf-after--p">We first framed a common problem: “There are two Grahams on our team and I only ever talk to one of them, so <em class="markup--em markup--p-em">that</em> Graham should always come first in the list.” The idea of “frecency” — a combination of frequency and recency — came up as a potential solution. As far as we can tell, frecency was a term coined by the Mozilla team in 2008 when they released Firefox 3’s Awesome Bar, a URL bar for the browser that suggested results based on your browsing history. <strong class="markup--strong markup--p-strong">(1)</strong></p>
                    <p name="1f86" id="1f86" class="graf--p graf-after--p">Given a query (e.g. “Matt”) and a list of results, frecency attempts to answer the question “which Matt did you mean?” It stores a history of what queries you’ve entered and where they took you, using this information to reorder the list.</p>
                    <h4 name="80de" id="80de" class="graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">How it works</strong></h4>
                    <p name="3bb5" id="3bb5" class="graf--p graf-after--h4">Before we can re-sort a list we need to record at least one successful query and where it went, which forms the basis of our history. When you type in “Sarah” and select the Sarah that you were looking for, we store the query “Sarah” with the ID of the object you selected and a timestamp representing when you went there. We store up to ten timestamps representing the last ten visits. We also store a count that we increment each time we record a hit.</p>
                    <figure name="ec70" id="ec70" class="graf--figure graf--iframe graf-after--p">
                      <div class="iframeContainer"><iframe width="700" height="250" src="/media/45528faffbebbbae34dd3bf935445ad8?maxWidth=700" data-media-id="45528faffbebbbae34dd3bf935445ad8" frameborder="0"></iframe></div>
                    </figure>
                    <p name="e421" id="e421" class="graf--p graf-after--figure">Now we have some data to work with! Next time you open up the Quick Switcher and start typing (e.g. “Sar”), we take your input and do a search on it. We get back some results — unbiased results straight from our default search algorithm — and pass that list to frecency along with the query you are entering. We look through the frecency history object for a query matching “Sar” and record any hits we find. Next we go through the original list and calculate a score for each item, which is zero unless we’ve found a hit that points to the item in question.</p>
                    <p name="f573" id="f573" class="graf--p graf-after--p">Score is determined by creating buckets of time that have different point values. The timestamps we record for each visit will fall into one of these buckets, adding points to the overall score. The exact point values don’t matter, just the relationship between the values.</p>
                    <p name="62a1" id="62a1" class="graf--p graf-after--p">Here’s what we came up with:</p>
                    <pre name="aaff" id="aaff" class="graf--pre graf-after--p">Within the past 4 hours: 100 points<br>Within the past day: 80 points<br>Within the past 3 days: 60 points<br>Within the past week: 40 points<br>Within the past month: 20 points<br>Within the past 90 days: 10 points<br>Beyond 90 days: 0 points</pre>
                    <p name="4df7" id="4df7" class="graf--p graf-after--pre">To illustrate, let’s say our “Sarah” query was recorded three times: just now, yesterday, and about a week ago.</p>
                    <pre name="0e0d" id="0e0d" class="graf--pre graf-after--p">Just now: +100<br>Yesterday: +80<br>About a week ago: +40</pre>
                    <p name="9fc6" id="9fc6" class="graf--p graf-after--pre">That’s 220 points. We have one critical step left, however. Mozilla engineers came up with a brilliantly clever formula to balance the time and frequency of use:</p>
                    <pre name="25e2" id="25e2" class="graf--pre graf-after--p">Final score = Total Count * Score / Number of Timestamps recorded (up to 10)</pre>
                    <p name="9dda" id="9dda" class="graf--p graf-after--pre">This deceptively simple calculation describes a delicate balance between recent hits (Score / # of Timestamps, which can’t exceed 100) and a boundless total count, which promotes things you’ve used a lot over longer periods of time. <strong class="markup--strong markup--p-strong">The implication that excites us most is that if you decide to start chatting regularly with a <em class="markup--em markup--p-em">different</em> Matt, that result will rise above the previous leader after just a few uses!</strong></p>
                    <figure name="f59b" id="f59b" class="graf--figure graf-after--p">
                      <div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 500px;">
                        <div class="aspect-ratio-fill" style="padding-bottom: 71.39999999999999%;"></div>
                        <img class="graf-image" data-image-id="1*jFMEoAe7fzF-PERNF9aBQQ.gif" data-width="700" data-height="500" src="https://cdn-images-1.medium.com/max/800/1*jFMEoAe7fzF-PERNF9aBQQ.gif">
                      </div>
                    </figure>
                    <h4 name="700c" id="700c" class="graf--h4 graf-after--figure"><strong class="markup--strong markup--h4-strong">Taking it further</strong></h4>
                    <p name="7f02" id="7f02" class="graf--p graf-after--h4">While this implementation got us 90% of the way, it left us with a frustrating edge case. If I talk to Ferla Husky on a regular basis by typing “Ferla” into Quick Switcher, she’ll accrue a high score and appear first in the list of results. If I type in “Husky”, however, she might be all the way at the bottom of the list. All we’ve taught Quick Switcher is that there is a relationship between the query “Ferla” and the user Ferla Husky, so the query “Husky” is a separate scenario with no recorded history.</p>
                    <p name="7e23" id="7e23" class="graf--p graf-after--p">We remedied this by storing both the “Ferla” query and Ferla’s ID in our history cache. When we’re assigning points to each item, Ferla’s ID is awarded <em class="markup--em markup--p-em">half</em> of the normal score and added to the query’s score as a bonus. This means that Ferla Husky will come up high in a search for “Husky”, but it <strong class="markup--strong markup--p-strong">won’t be high enough to override your usual “Husky” query</strong>. Neat. <strong class="markup--strong markup--p-strong">(2)</strong></p>
                    <p name="a38f" id="a38f" class="graf--p graf-after--p">Here’s a more realistic view of our cache that takes into account query reuse:</p>
                    <figure name="2bae" id="2bae" class="graf--figure graf--iframe graf-after--p">
                      <div class="iframeContainer"><iframe width="700" height="250" src="/media/d208d059fdbf6488ecc4f83d5ee84cd3?maxWidth=700" data-media-id="d208d059fdbf6488ecc4f83d5ee84cd3" frameborder="0"></iframe></div>
                    </figure>
                    <p name="ad9f" id="ad9f" class="graf--p graf-after--figure graf--last">Our previous sorting logic was overflowing with edge cases and implementation-specific details. We found it refreshing to take some of our sorting into the domain of number systems. Once you’re able to score a set of items it’s easy to imagine pushing and pulling at those numbers to promote or demote items based on nuanced situations. We’re excited to keep fine-tuning the algorithm and to use it wherever a personal touch is needed.</p>
                  </div>
                </div>
              </section>
              <section name="b64a" class=" section--body">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider">
                </div>
                <div class="section-content">
                  <div class="section-inner layoutSingleColumn">
                    <h4 name="9910" id="9910" class="graf--h4 graf--first">Smarter Searching</h4>
                    <p name="4843" id="4843" class="graf--p graf-after--h4">Before handing things off to frecency, the Quick Switcher needs to figure out which channels and members match what you typed. It uses a few heuristics that have served us well since the Quick Switcher was first introduced. For instance, channel names often use hyphens or underscores to separate words. The Quick Switcher will match against any of those substrings, while preferring matches that start at the beginning for the purposes of sorting. You can also leave out the separator altogether in your query.</p>
                    <p name="cab5" id="cab5" class="graf--p graf-after--p">To improve on those simple rules, the new Quick Switcher now lets you combine and reorder those substrings in your queries. For example, “<strong class="markup--strong markup--p-strong">devweb</strong>” now matches “<strong class="markup--strong markup--p-strong">#devel-webapp</strong>”. You don’t need to remember whether it’s “<strong class="markup--strong markup--p-strong">#design-team</strong>” or “<strong class="markup--strong markup--p-strong">#team-design</strong>”: “<strong class="markup--strong markup--p-strong">design team</strong>” will match both. Typing someone’s initials will also find them, so “<strong class="markup--strong markup--p-strong">dh</strong>” will return “<strong class="markup--strong markup--p-strong">Duretti Hirpa</strong>” (if you’re lucky enough to have her on your team).</p>
                    <p name="f776" id="f776" class="graf--p graf-after--p">These clever matching rules would be difficult to implement with the same regular expression-based approach of the old Quick Switcher, so querying is now modelled as a graph search. Each letter in a channel or member name is a node in the graph, with weighted edges to the following letter and to the beginning of other substrings. Edges that jump to other substrings have a larger weight than edges between adjacent nodes. We then look for a path through the graph using the letters in the query. The weights of the edges followed are summed up and used for sorting. This approach gives us a lot of room to tune the “fuzziness” of the Quick Switcher over time.</p>
                    <p name="6be2" id="6be2" class="graf--p graf-after--p graf--last">We also took the opportunity to consolidate the Quick Switcher’s rules for searching and sorting into reusable modules. This is the first step towards ensuring that all the filters, type-aheads and autocompletes in Slack work the same way.</p>
                  </div>
                </div>
              </section>
              <section name="aaa1" class=" section--body">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider">
                </div>
                <div class="section-content">
                  <div class="section-inner layoutSingleColumn">
                    <h4 name="1ff5" id="1ff5" class="graf--h4 graf--first">A little better every day</h4>
                    <p name="8d1b" id="8d1b" class="graf--p graf-after--h4 graf--last">The Quick Switcher now gets better every time you use it. Our efforts required a rewrite, but it was a thoughtful one. We left intact the interface, interaction, and special case handling that our customers are used to (like offering to create a channel when you don’t find any matches) while focusing on improvements to performance and search and sort behavior to make the experience more pleasant. We’re eager to bring these new capabilities to our mobile apps and to other parts of our UI.</p>
                  </div>
                </div>
              </section>
              <section name="1efe" class=" section--body section--last">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider">
                </div>
                <div class="section-content">
                  <div class="section-inner layoutSingleColumn">
                    <p name="16b2" id="16b2" class="graf--p graf--first"><strong class="markup--strong markup--p-strong">1) </strong>The Mozilla algorithm is <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places/Frecency_algorithm" data-href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places/Frecency_algorithm" class="markup--anchor markup--p-anchor" rel="nofollow">documented on MDN</a>.</p>
                    <p name="dd48" id="dd48" class="graf--p graf-after--p graf--last"><strong class="markup--strong markup--p-strong">2) </strong><a href="http://blog.ram.rachum.com/post/33095461928/developers-when-using-frecency-please-consider" data-href="http://blog.ram.rachum.com/post/33095461928/developers-when-using-frecency-please-consider" class="markup--anchor markup--p-anchor" rel="nofollow">We listened, Ram</a>.</p>
                  </div>
                </div>
              </section>
            </main>
            <footer class="postArticle-footer">
              <div class="postActionsFooter container u-size740">
                <div class="row">
                  <div class="col u-xs-size12of12">
                    <div class="postMeta-inlineAcknowledgments"><span class="postMeta-acknowledgment"><span data-tooltip="The following people helped the author by providing feedback before the story was published.">Thanks to</span> <span><a class="link"  href="https://medium.com/@rharmes" data-action="show-user-card" data-action-type="hover" data-user-id="e422a547344" dir="auto">Ross Harmes</a> and </span><span><a class="link"  href="https://medium.com/@uxdiogenes" data-action="show-user-card" data-action-type="hover" data-user-id="7d14046f418e" dir="auto">Diogenes Brito</a></span>.</span> </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col u-xs-size12of12 js-postTags">
                    <div class="postTags">
                      <div class="tags tags--postTags tags--borderless"><a class="link"  href="https://medium.com/tag/javascript?source=post" title="Go to JavaScript" aria-label="Go to JavaScript" data-action-source="post">JavaScript</a><a class="link"  href="https://medium.com/tag/slack?source=post" title="Go to Slack" aria-label="Go to Slack" data-action-source="post">Slack</a><a class="link"  href="https://medium.com/tag/algorithms?source=post" title="Go to Algorithms" aria-label="Go to Algorithms" data-action-source="post">Algorithms</a></div>
                    </div>
                  </div>
                </div>
                <div class="row js-postActionsFooter">
                  <div class="postActions col u-xs-size12of12">
                    <div class="u-floatLeft buttonSet buttonSet--withLabels">
                      <div class="buttonSet-inner">
                        <div class="js-actionRecommend" data-post-id="77cbc193cb60" data-size="29px">
                          <button class="button button--primary button--large button--chromeless button--withIcon button--withSvgIcon"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it"data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/77cbc193cb60">
                            <span class="button-defaultState">
                              <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--heart svgIcon-size--29px">
                                <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-heart-29px-p0"></use>
                              </svg>
                            </span>
                            <span class="button-activeState">
                              <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--heartFilled svgIcon-size--29px">
                                <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-heartFilled-29px-p0"></use>
                              </svg>
                            </span>
                          </button>
                          <button class="button button--chromeless"  data-action="show-recommends" data-action-value="77cbc193cb60">189</button>
                        </div>
                      </div>
                      <div class="buttonSet-inner">
                        <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="scroll-to-responses">
                          <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--response svgIcon-size--29px">
                            <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-response-29px-p0"></use>
                          </svg>
                        </button>
                        <button class="button button--chromeless"  data-action="scroll-to-responses">5</button>
                      </div>
                    </div>
                    <div class="u-floatRight buttonSet buttonSet--narrow">
                      <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="share-on-twitter"value="77cbc193cb60">
                        <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--twitter svgIcon-size--29px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-twitter-29px-p0"></use>
                        </svg>
                      </button>
                      <button class="button button--large button--dark button--chromeless button--withIcon button--withSvgIcon"  data-action="share-on-facebook"value="77cbc193cb60">
                        <svg viewBox="0 0 29 29" width="29" height="29" class="svgIcon svgIcon--facebook svgIcon-size--29px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-facebook-29px-p0"></use>
                        </svg>
                      </button>
                      <button class="button button--large button--dark button--chromeless button--withIcon js-moreActionsButton button--withSvgIcon"  title="More actions" aria-label="More actions" data-action="more-actions">
                        <svg viewBox="0 0 25 25" width="25" height="25" class="svgIcon svgIcon--more svgIcon-size--25px">
                          <use class="svgIcon-use svgIcon-use--part0" xlink:href="#svg-more-25px-p0"></use>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="container u-size740">
                <div class="row postFooter-info2">
                  <div class="col u-xs-size12of12">
                    <hr class="postFooter-infoDivider">
                  </div>
                </div>
                <div class="row js-postFooterInfo">
                  <div class="col u-xs-size12of12 u-sm-size6of12">
                    <li class="card card-user">
                      <div class="u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="28279a71b4f2"><button class="button button--small u-noUserSelect button--withChrome button--withHover button--unblock js-unblockButton" data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome button--follow js-followButton" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/28279a71b4f2" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div>
                      <div class="card-imageWrapper "><a class="link avatar"  href="https://medium.com/@SlackEng?source=footer_card" title="Go to the profile of Slack Engineering" aria-label="Go to the profile of Slack Engineering" data-action-source="footer_card" data-user-id="28279a71b4f2" dir="auto"><img src="https://cdn-images-1.medium.com/fit/c/60/60/1*GB9girro1GFX16imhDm_wA.png" class="avatar-image avatar-image--small" alt="Go to the profile of Slack Engineering"></a></div>
                      <div class="card-content">
                        <h3 class="card-name"><a class="link link--primary"  href="https://medium.com/@SlackEng" property="cc:attributionName" title="Go to the profile of Slack Engineering" aria-label="Go to the profile of Slack Engineering" rel="author cc:attributionUrl" data-user-id="28279a71b4f2" dir="auto">Slack Engineering</a></h3>
                      </div>
                    </li>
                  </div>
                  <div class="col u-xs-size12of12 u-sm-size6of12 postFooter-collectionCard">
                    <li class="card card-collection">
                      <div class="u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome button--followCollection js-followCollectionButton" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/several-people-are-coding/77cbc193cb60" data-action-source="footer_card_collection_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></div>
                      <div class="card-imageWrapper ">
                        <div class="card-imageWrapper "><a class="link avatar avatar--roundedRectangle"  href="https://slack.engineering?source=footer_card" title="Go to Several People Are Coding" aria-label="Go to Several People Are Coding" data-action-source="footer_card"><img src="https://cdn-images-1.medium.com/fit/c/60/60/1*1mPvixjECYE4qm2L1EoNtA.png" class="avatar-image u-xs-size60x60" alt="Several People Are Coding"></a></div>
                      </div>
                      <div class="card-content">
                        <h3 class="card-name"><a class="link link--primary"  href="https://slack.engineering?source=footer_card" title="Go to Several People Are Coding" aria-label="Go to Several People Are Coding" rel="collection" data-action-source="footer_card">Several People Are Coding</a></h3>
                        <p class="card-description">The Slack Engineering Blog</p>
                        <div class="buttonSet"></div>
                      </div>
                    </li>
                  </div>
                </div>
              </div>
              <div class="js-postBundleWrapper postBundleWrapper"></div>
              <div class="responsesWrapper supplementalPostContent js-responsesWrapper"></div>
              <div class="supplementalPostContent js-readNext"></div>
            </footer>
          </article>
          <div class="promoCardWrapper js-promoCardWrapper">
            <div class="promoCard">
              <button class="button button--chromeless button--close"  data-action="popup-dismiss">&times;</button>
              <div class="promoCard-header">Don’t miss Slack Engineering’s next story</div>
              <div class="u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="28279a71b4f2"><button class="button u-noUserSelect button--withChrome button--withHover button--unblock js-unblockButton" data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="user_follow_popup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-noUserSelect button--withChrome button--follow js-followButton" data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/28279a71b4f2" data-action-source="user_follow_popup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div>
              <div class="avatar"><img src="https://cdn-images-1.medium.com/fit/c/40/40/1*GB9girro1GFX16imhDm_wA.png" class="avatar-image avatar-image--smaller" alt="Slack Engineering"><span class="avatar-text">Slack Engineering</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="loadingBar"></div>
    <script>// <![CDATA[
      window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
      // ]]>
    </script><script>// <![CDATA[
      var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://slack.engineering","bestOfFirstSlug":"may-2013","bestOfLatestSlug":"january-2016","buildLabel":"19411-3649e33","currentUser":{"userId":"lo_fc871eba2ce1","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"facebookKey":"542599432471018","facebookScope":["public_profile","email","user_friends"],"isAuthenticated":false,"isCurrentUserVerified":false,"language":"en-us","loadingPlaceholderImg":"https://cdn-static-1.medium.com/_/fp/img/media-loading-placeholder.b31hiO4ynbDLRrXWEFF4aQ.png","mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/js/main-base.bundle.qafWpBxdYFYAxtiq_My4eQ.js","notes":"https://cdn-static-1.medium.com/_/fp/js/main-notes.bundle.jeenrp8-G_hXSIPxpjsLAg.js","posters":"https://cdn-static-1.medium.com/_/fp/js/main-posters.bundle.Wx_OBOnM2x4G7KIQ_Oac8g.js","common-async":"https://cdn-static-1.medium.com/_/fp/js/main-common-async.bundle.6kg3PnkT2tVqiGDa8vvX8g.js","stats":"https://cdn-static-1.medium.com/_/fp/js/main-stats.bundle.uxmV4SG_YSNPUtt70R5XIw.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/js/main-misc-screens.bundle.dcV7AoD1JE5-TEb5QZLOQQ.js"},"postColumnWidth":700,"previewConfig":{"weightThreshold":1,"weightEmptyParagraph":0,"weightIframeParagraph":0.8,"weightImageParagraph":0.51,"weightTextParagraph":0.08,"weightBq":0.003,"weightH":0.005,"weightP":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15,"experimentImagesInsetCenter":false,"previewConfigVariantA":{"experimentImagesInsetCenter":true},"previewConfigVariantB":{"weightThreshold":10,"detectTitle":false}},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1454517416466:e372e4a72cc3","useragent":{"browser":"safari","family":"safari","os":"mac","version":9,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isFacebook":false,"isWebView":false,"isFacebookWebView":false,"supportsSvgExternalResources":true,"supportsScrollableMetabar":true,"supportsProgressiveMedia":true,"isGoogle":false},"variants":{"allow_access":true,"allow_signup":true,"can_vote":true,"can_update_settings":true,"can_send_push_notifications":true,"can_export_data":true,"enable_notes":true,"allow_test_auth":"disallow","enable_email_registration":true,"enable_spam_detection":true,"use_experimental_css":true,"can_resume_from_last_read_location":true,"can_follow_users":true,"receive_post_published_pushes":true,"receive_mention_pushes":true,"use_new_scheduled_delivery_flow":true,"feed_homepage":true,"welcome_post_url":"https://medium.com/about/about-medium-9eac453da935","signin_services":"twitter,facebook,google","signup_services":"twitter,facebook,google","mobile_app_promotion":"dialog","enable_bing_search":true,"enable_algolia_search":true,"show_tagged_posts_in_search":true,"friends_only_quotes":true,"enable_rating_prompt":true,"enable_your_stories_more_actions":true,"enable_user_search_with_bing":true,"enable_drop_caps":true,"enable_session_cookie_encryption":true,"enable_editors_can_pull_stories":true,"enable_send_pub_newsletters":true,"enable_receive_pub_newsletters":true,"enable_tag_follow_onboarding":true,"your_top_stories_source":"similar-posts","follower_suggestion_source":"friends-of-friends","enable_query_by_in_response_to_post_id":true,"enable_service_worker":true,"android_rating_prompt_recommend_threshold":5,"number_of_top_stories":3,"number_of_in_stream_ts4u":3,"number_of_in_stream_global_top_stories":3,"source_of_in_stream_ts4u":"friends-rec-7d","enable_top_stories_in_stream":true,"enable_top_stories_in_stream_on_ios":true,"enable_top_stories_in_stream_on_android":true,"enable_post_recommend_threshold_in_stream":true,"enable_response_recommend_threshold_in_stream":true,"post_recommend_threshold":1,"response_recommend_threshold":2,"new_stream_reasons":true,"google_sign_in_android":true,"enable_pile_on_activity":true,"enable_onboarding":true,"enable_rds_activity":true,"enable_rds_activity_read":true,"enable_activity_rollup":true,"activity_rollup_method":"all","enable_activity_rollup_be":true,"enable_simple_open_in_app":true,"custom_miro_url":"https://cdn-images-1.medium.com","ios_custom_miro_url":"https://cdn-images-1.medium.com","enable_friends_recommends_plugin":true,"enable_write_stats_cache":true,"enable_populate_post_stats":true,"enable_most_recommended_response":true,"no_push_notification_for_responses":true,"receive_follow_pushes":true,"receive_recommend_pushes":true,"receive_response_pushes":true,"receive_highlight_pushes":true,"enable_ios_badge":true,"enable_small_first_page":true,"enable_response_email2":true,"fetch_with_relation_index":true,"user_popover_experiment":true,"reengagement_notification_duration":3,"enable_context_cards":true,"enable_progressive_media":true,"enable_oauth_api":true,"enable_oauth_token_self_issuance":true,"enable_oauth_app_creation":true,"list_of_lists_bucket":"default","use_new_push_notification_logic":true,"enable_send_ios_pushes_using_channel_ids":true,"explore_tab_ios_posts_per_section_limit":4,"enable_hopper_user_blocks":true,"enable_user_social_count_healing":true,"enable_social_counts_from_user_stat_total":true,"enable_responses_stream":true,"show_social_buttons_on_logged_out_post_footer":true,"show_sponsored_read_next":true,"track_with_social_id":true,"filter_responses_in_stream":true,"top_stories_2_dot_0":true,"disable_inherit_tags_inline":true,"enable_web_stream_api":true,"sponsored_read_next_cohort":"a","enable_post_bundles":true,"post_bundles_type":"curated","show_author_writes_about":true,"prefetch_tag_suggestions":true,"enable_pub_twitter_connect":true,"enable_tab_titles_ios":true,"enable_conversations_ios":true,"enable_expand_responses_inline_ios":true,"enable_post_scheduling":true,"enable_sticky_footers_ios":true,"enable_web_card_homepage":true,"show_letters_stats":true,"skip_onboarding_people_and_pubs_step":true,"enable_pubs_migration_processing":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/img/default-avatar.png":"https://cdn-static-1.medium.com/_/fp/img/default-avatar.dmbNkD5D-u45r44go_cf0g.png","/img/default-preview-image.png":"https://cdn-static-1.medium.com/_/fp/img/default-preview-image.IsBK38jFAJBlWifMLO4z9g.png","/img/default-preview-image-v2.png":"https://cdn-static-1.medium.com/_/fp/img/default-preview-image-v2.MXL-j6S8fTEd8UFP_foEEw.png","/img/email/app_store_badge@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/app_store_badge@2x.8bDQGNMm-Xs7Hz6WA2XquQ.png","/img/email/app-devices@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/app-devices@2x.Ewl5-si-nhkLKZFIFSgrOw.png","/img/email/check1.png":"https://cdn-static-1.medium.com/_/fp/img/email/check1.0DM77li7vZhq5o2V9cVYLQ.png","/img/email/check2.png":"https://cdn-static-1.medium.com/_/fp/img/email/check2.GLlNusQmn1hwo9WDN-gE1w.png","/img/email/check3.png":"https://cdn-static-1.medium.com/_/fp/img/email/check3.7VxOUVMXAVbHRRnzMrJ_5A.png","/img/email/email-logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/email-logo.x91rxfZYzIT9OJ5-ySD30A.png","/img/email/fb_logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/fb_logo.Q0M98YwNTu77gLWTK6-RyQ.png","/img/email/google_play_badge@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/google_play_badge@2x.iWEWlt5_Qj20rr79-IGEBQ.png","/img/email/heart.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart._hlyuYQiuuTWrRmDnDphJA.png","/img/email/heart@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart@2x.qvCTX1XHNpntqxt01oypQw.png","/img/email/heart1.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart1.rnGEmSwcGUhztl_zSU7l6Q.png","/img/email/heart2.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart2.HBiLu3koIYsKjjKroohgbA.png","/img/email/heart3.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart3.AIJBOHw11HuhdClVJNtmtg.png","/img/email/large.png":"https://cdn-static-1.medium.com/_/fp/img/email/large.4EIhZbIk5sgqYSoB4YPmUA.png","/img/email/response.png":"https://cdn-static-1.medium.com/_/fp/img/email/response.5ZuN24N5XqS7ofHKg1lKXw.png","/img/email/response@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/response@2x.xzKQM4FzSurAVkghLQQWkA.png","/img/email/twitter_logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/twitter_logo.Pz4a3o9WMU5QioxLKcyFhQ.png","/img/email/unlisted.png":"https://cdn-static-1.medium.com/_/fp/img/email/unlisted.ikh8R2LElOz_1YM8A2Db4g.png","/img/email/welcome-heart.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-heart.6BRCOGcwGeOCBTql8pbq2g.png","/img/email/welcome-response.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-response.iWVQLjiUG5pyQrPyGiYEpw.png","/img/email/welcome-write.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-write.afdGsuE6YDk3HkaIASRl0w.png","/img/help/add-media-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/add-media-start.GXmqQ2Svt1WfZGIZSM93tg.gif","/img/help/add-media.gif":"https://cdn-static-1.medium.com/_/fp/img/help/add-media.SZH2LBmkwVExuhozFfVvYg.gif","/img/help/embed-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/embed-start.EBJ2PcWFJuYopsQV4wwklA.gif","/img/help/embed.gif":"https://cdn-static-1.medium.com/_/fp/img/help/embed.1BM0Di9vd91Kv8fLioJabw.gif","/img/help/text-highlight-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/text-highlight-start.AvTbakaFuUCd05YoMECoMQ.gif","/img/help/text-highlight.gif":"https://cdn-static-1.medium.com/_/fp/img/help/text-highlight.XVChoKYZ1-s3gJgHm9-7Yg.gif","/img/help/2.0-add-media.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-add-media.LhrJcTFODoqjnPPuHNEInA.gif","/img/help/2.0-add-media-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-add-media-start.PTVdm36977cSfaYOpMNTNQ.png","/img/help/2.0-highlight-menu.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-highlight-menu.vMoUc7pXOyYFMJX68LXicw.gif","/img/help/2.0-highlight-menu-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-highlight-menu-start.7vCytTKUZPOZvr_MCYADsA.png","/img/help/2.0-embed.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-embed.2g5jIXYtWjsRFa9D-hBhMQ.gif","/img/help/2.0-embed-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-embed-start.LGy_FmixvcoEVIDKjg1jwA.png","/img/help/2.0-mention.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-mention.H9pEv0eHAvkGUVqdrHxH5g.gif","/img/help/2.0-mention-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-mention-start.ShYTOfy6w3VDU9PKFfOEyw.png","/img/help/highlight-tips-1.gif":"https://cdn-static-1.medium.com/_/fp/img/help/highlight-tips-1.dEp02HXMKtAeKxsV5MWqGg.gif","/img/help/highlight-tips-2.gif":"https://cdn-static-1.medium.com/_/fp/img/help/highlight-tips-2.SyXCciYXeNpx4-GUAuh0XQ.gif","/img/import/highlight-menu.png":"https://cdn-static-1.medium.com/_/fp/img/import/highlight-menu.kzoaVM8mJJ-Hu9m9uo3Omg.png","/img/import/image-highlight-menu.png":"https://cdn-static-1.medium.com/_/fp/img/import/image-highlight-menu.q43-H2dl0JvBS_5znQCW8A.png","/img/import/publish-metabar.png":"https://cdn-static-1.medium.com/_/fp/img/import/publish-metabar.YbEX1a2Pu0rAR_LuKeg8JA.png"},"facebookNamespace":"medium-com","authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":false,"domainCollectionSlug":"several-people-are-coding","algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"aadabda268e3bfaffe7b287709262fec","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","iconsSvgUrl":"/_/proxy-static/_/fp/icons/icons.08iw0v-j3mxsahlQL78olQ.svg","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","iconsJsUrl":"https://cdn-static-1.medium.com/_/fp/js/icons.3FSn51r-JxaxNlymiGTDNw.js","favIconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-new.TAS6uQ-Y7kcKgi0xjcYHXw.ico","cssFontUrls":["https://cdn-static-1.medium.com/_/fp/css/fonts-base.LqXl5T9RMAR39Ge23ku50w.css"]},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_test_kgaI7g0OvDySoqecpxnmmqWk","archiveUploadSizeMb":25,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}}}
      // ]]>
    </script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/main-base.bundle.qafWpBxdYFYAxtiq_My4eQ.js" async="true"></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/icons.3FSn51r-JxaxNlymiGTDNw.js"></script><script>// <![CDATA[
      window["obvInit"]({"value":{"id":"77cbc193cb60","versionId":"63c7b41bab32","creatorId":"28279a71b4f2","creator":{"userId":"28279a71b4f2","name":"Slack Engineering","username":"SlackEng","createdAt":1452727478734,"lastPostCreatedAt":1454348532813,"imageId":"1*GB9girro1GFX16imhDm_wA.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"28279a71b4f2","usersFollowedCount":1,"usersFollowedByCount":203,"type":"SocialStats"},"social":{"userId":"lo_fc871eba2ce1","targetUserId":"28279a71b4f2","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"},"homeCollection":{"id":"58820b6d8904","name":"Several People Are Coding","slug":"several-people-are-coding","tags":[],"creatorId":"e422a547344","description":"The Slack Engineering Blog","shortDescription":"The Slack Engineering Blog","image":{"imageId":"1*1mPvixjECYE4qm2L1EoNtA.png","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":189,"postCount":1,"activeAt":1453748919526},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false},"isSubscribed":false,"isNewsletterSubscribed":false},"logo":{"imageId":"1*SWg0qbhf5Y8M-KFU0diqvA.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":72,"strategy":"resample","height":0,"width":0},"twitterUsername":"","facebookPageName":"","publicEmail":"","collectionMastheadId":"fd74c3cc70ed","domain":"slack.engineering","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Several People Are Coding","description":"The Slack Engineering Blog","backgroundImage":{"id":"","originalWidth":0,"originalHeight":0,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"logoImage":{"id":"1*SelRlfZgYmKP0fzjuJxHFQ.png","originalWidth":350,"originalHeight":160,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"alignment":1,"layout":1}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":4,"postIds":[],"tagSlug":"","posts":[]}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":5,"postIds":[],"tagSlug":"","posts":[]}}],"type":"Collection"},"homeCollectionId":"58820b6d8904","title":"A faster, smarter Quick Switcher","detectedLanguage":"en","latestVersion":"63c7b41bab32","latestPublishedVersion":"63c7b41bab32","hasUnpublishedEdits":false,"latestRev":1666,"createdAt":1452729192249,"updatedAt":1454197151318,"acceptedAt":0,"firstPublishedAt":1453748270501,"latestPublishedAt":1453920031084,"isRead":false,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"We rewrote the Quick Switcher to dramatically improve performance and make it a whole lot easier to use. Here’s what we learned.","bodyModel":{"paragraphs":[{"name":"229a","type":4,"text":"Switches by Joi Ito licensed under Creative Commons. Cropped.","markups":[{"type":3,"start":0,"end":8,"href":"https://www.flickr.com/photos/joi/494430235/","title":"","rel":"","anchorType":0},{"type":3,"start":35,"end":51,"href":"https://creativecommons.org/licenses/by/2.0/","title":"","rel":"","anchorType":0}],"layout":5,"metadata":{"id":"1*VfY_n9_DS42MrbCrKpZEXw.jpeg","originalWidth":3916,"originalHeight":1669}},{"name":"2763","type":3,"text":"A faster, smarter Quick Switcher","markups":[]},{"name":"7e16","type":1,"text":"By Diogenes Brito, Patrick Kane, Johnny Rodgers, and Kyle Stetz.","markups":[{"type":3,"start":3,"end":17,"anchorType":2,"userId":"7d14046f418e"},{"type":3,"start":19,"end":31,"anchorType":2,"userId":"649dd4575453"},{"type":3,"start":33,"end":47,"anchorType":2,"userId":"3297dadd8b70"},{"type":3,"start":53,"end":63,"anchorType":2,"userId":"4eea65c5f388"}]},{"name":"2420","type":1,"text":"Getting to the right conversation in Slack should be easy. And it should be fast. Like, really fast. When we first released the Quick Switcher in early 2014, we aimed to provide a way to quickly and easily switch to any channel or direct message you wanted. It was keyboard accessible (just press ⌘+k on Mac or ctrl+k on Windows and Linux) and it made power users happy.","markups":[{"type":3,"start":106,"end":142,"href":"https://medium.com/@johnnyrodgersis/a-little-better-every-day-702d4849d968","title":"","rel":"","anchorType":0},{"type":1,"start":297,"end":300},{"type":1,"start":311,"end":317},{"type":2,"start":88,"end":99}]},{"name":"aee9","type":1,"text":"However, over time its shortcomings began to bother both us and our customers. It was awfully slow on large teams, taking several seconds to open in the worst cases. Even under good circumstances it could take 100 milliseconds to open — an eternity when capturing the next keystroke is important. It used an overly simplistic matching and sorting algorithm to find and order results. And it didn’t remember who you switched to, no matter how many times you picked the 4th Matt from the list.","markups":[]},{"name":"39a5","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*DRJpMrFQqwHIN8rh0CDklA.png","originalWidth":700,"originalHeight":500}},{"name":"69d2","type":1,"text":"When we turned our attention to fixing these problems, we had two key goals. The new Quick Switcher should:","markups":[]},{"name":"a5ad","type":9,"text":"Open nearly instantly, regardless of team size","markups":[]},{"name":"0016","type":9,"text":"Remember who and what you switch to and prioritize those results","markups":[]},{"name":"a294","type":1,"text":"With these in mind, we got to work.","markups":[]},{"name":"3605","type":13,"text":"Performance","markups":[]},{"name":"81b8","type":1,"text":"We profiled the performance of the Quick Switcher to find out where we were spending the most time. There were three main culprits:","markups":[]},{"name":"ab18","type":10,"text":"Building and rendering long lists","markups":[]},{"name":"41eb","type":10,"text":"Inefficient HTML building","markups":[]},{"name":"08c0","type":10,"text":"No data prefetching and expensive sorting","markups":[]},{"name":"168f","type":1,"text":"Each of these were fairly easy to remedy in isolation. For 1, don’t build a long list! Only show a user’s unread channels and direct messages on open, and limit those to a reasonable number — we settled on 24. This manageable list replaced the list of all of a team’s channels and members on open, the weight of which could be crushing on a large team.","markups":[{"type":1,"start":252,"end":256}]},{"name":"3a64","type":1,"text":"To address 2, we templatized our HTML and reduced the number of DOM elements for the container and list items by simplifying the markup and harmonizing the presentation of each type.","markups":[]},{"name":"49fc","type":1,"text":"Finally, we prefetched the data needed to search on open (rather than on keydown), and sorted it using a more efficient algorithm with fewer special cases to churn through.","markups":[]},{"name":"ffb0","type":1,"text":"When complete, we were able to routinely open the Quick Switcher in 7 milliseconds at the median, and render results in 12 milliseconds. By comparison, the original implementation took 85 milliseconds to open and 100 milliseconds to render results. We measure this and a variety of other performance data via our custom client-side timing code, which we log to LogStash and visualize with Kibana. Data is collected across all teams and team sizes.","markups":[]},{"name":"b21d","type":4,"text":"7ms median render time! For reference, 1 frame at 60fps is 16.67ms, and our goal was to clear it with some room to spare.","markups":[],"layout":1,"metadata":{"id":"1*on6QoCfx2At6gn03Krmh1w.png","originalWidth":604,"originalHeight":612}},{"name":"87a0","type":13,"text":"Frecency: sorting by frequency + recency","markups":[]},{"name":"4329","type":1,"text":"With our performance woes in check, the next item to tackle was personalization. We wanted the Quick Switcher to remember and prioritize the direct messages and channels you actually use, rather than constantly showing you the same sorted list.","markups":[]},{"name":"c0bd","type":1,"text":"We first framed a common problem: “There are two Grahams on our team and I only ever talk to one of them, so that Graham should always come first in the list.” The idea of “frecency” — a combination of frequency and recency — came up as a potential solution. As far as we can tell, frecency was a term coined by the Mozilla team in 2008 when they released Firefox 3’s Awesome Bar, a URL bar for the browser that suggested results based on your browsing history. (1)","markups":[{"type":1,"start":462,"end":465},{"type":2,"start":109,"end":113}]},{"name":"1f86","type":1,"text":"Given a query (e.g. “Matt”) and a list of results, frecency attempts to answer the question “which Matt did you mean?” It stores a history of what queries you’ve entered and where they took you, using this information to reorder the list.","markups":[]},{"name":"80de","type":13,"text":"How it works","markups":[{"type":1,"start":0,"end":12}]},{"name":"3bb5","type":1,"text":"Before we can re-sort a list we need to record at least one successful query and where it went, which forms the basis of our history. When you type in “Sarah” and select the Sarah that you were looking for, we store the query “Sarah” with the ID of the object you selected and a timestamp representing when you went there. We store up to ten timestamps representing the last ten visits. We also store a count that we increment each time we record a hit.","markups":[]},{"name":"ec70","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"45528faffbebbbae34dd3bf935445ad8"}},{"name":"e421","type":1,"text":"Now we have some data to work with! Next time you open up the Quick Switcher and start typing (e.g. “Sar”), we take your input and do a search on it. We get back some results — unbiased results straight from our default search algorithm — and pass that list to frecency along with the query you are entering. We look through the frecency history object for a query matching “Sar” and record any hits we find. Next we go through the original list and calculate a score for each item, which is zero unless we’ve found a hit that points to the item in question.","markups":[]},{"name":"f573","type":1,"text":"Score is determined by creating buckets of time that have different point values. The timestamps we record for each visit will fall into one of these buckets, adding points to the overall score. The exact point values don’t matter, just the relationship between the values.","markups":[]},{"name":"62a1","type":1,"text":"Here’s what we came up with:","markups":[]},{"name":"aaff","type":8,"text":"Within the past 4 hours: 100 points\nWithin the past day: 80 points\nWithin the past 3 days: 60 points\nWithin the past week: 40 points\nWithin the past month: 20 points\nWithin the past 90 days: 10 points\nBeyond 90 days: 0 points","markups":[]},{"name":"4df7","type":1,"text":"To illustrate, let’s say our “Sarah” query was recorded three times: just now, yesterday, and about a week ago.","markups":[]},{"name":"0e0d","type":8,"text":"Just now: +100\nYesterday: +80\nAbout a week ago: +40","markups":[]},{"name":"9fc6","type":1,"text":"That’s 220 points. We have one critical step left, however. Mozilla engineers came up with a brilliantly clever formula to balance the time and frequency of use:","markups":[]},{"name":"25e2","type":8,"text":"Final score = Total Count * Score / Number of Timestamps recorded (up to 10)","markups":[]},{"name":"9dda","type":1,"text":"This deceptively simple calculation describes a delicate balance between recent hits (Score / # of Timestamps, which can’t exceed 100) and a boundless total count, which promotes things you’ve used a lot over longer periods of time. The implication that excites us most is that if you decide to start chatting regularly with a different Matt, that result will rise above the previous leader after just a few uses!","markups":[{"type":1,"start":233,"end":413},{"type":2,"start":327,"end":336}]},{"name":"f59b","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*jFMEoAe7fzF-PERNF9aBQQ.gif","originalWidth":700,"originalHeight":500}},{"name":"700c","type":13,"text":"Taking it further","markups":[{"type":1,"start":0,"end":17}]},{"name":"7f02","type":1,"text":"While this implementation got us 90% of the way, it left us with a frustrating edge case. If I talk to Ferla Husky on a regular basis by typing “Ferla” into Quick Switcher, she’ll accrue a high score and appear first in the list of results. If I type in “Husky”, however, she might be all the way at the bottom of the list. All we’ve taught Quick Switcher is that there is a relationship between the query “Ferla” and the user Ferla Husky, so the query “Husky” is a separate scenario with no recorded history.","markups":[]},{"name":"7e23","type":1,"text":"We remedied this by storing both the “Ferla” query and Ferla’s ID in our history cache. When we’re assigning points to each item, Ferla’s ID is awarded half of the normal score and added to the query’s score as a bonus. This means that Ferla Husky will come up high in a search for “Husky”, but it won’t be high enough to override your usual “Husky” query. Neat. (2)","markups":[{"type":1,"start":298,"end":355},{"type":1,"start":363,"end":366},{"type":2,"start":152,"end":156}]},{"name":"a38f","type":1,"text":"Here’s a more realistic view of our cache that takes into account query reuse:","markups":[]},{"name":"2bae","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"d208d059fdbf6488ecc4f83d5ee84cd3"}},{"name":"ad9f","type":1,"text":"Our previous sorting logic was overflowing with edge cases and implementation-specific details. We found it refreshing to take some of our sorting into the domain of number systems. Once you’re able to score a set of items it’s easy to imagine pushing and pulling at those numbers to promote or demote items based on nuanced situations. We’re excited to keep fine-tuning the algorithm and to use it wherever a personal touch is needed.","markups":[]},{"name":"9910","type":13,"text":"Smarter Searching","markups":[]},{"name":"4843","type":1,"text":"Before handing things off to frecency, the Quick Switcher needs to figure out which channels and members match what you typed. It uses a few heuristics that have served us well since the Quick Switcher was first introduced. For instance, channel names often use hyphens or underscores to separate words. The Quick Switcher will match against any of those substrings, while preferring matches that start at the beginning for the purposes of sorting. You can also leave out the separator altogether in your query.","markups":[]},{"name":"cab5","type":1,"text":"To improve on those simple rules, the new Quick Switcher now lets you combine and reorder those substrings in your queries. For example, “devweb” now matches “#devel-webapp”. You don’t need to remember whether it’s “#design-team” or “#team-design”: “design team” will match both. Typing someone’s initials will also find them, so “dh” will return “Duretti Hirpa” (if you’re lucky enough to have her on your team).","markups":[{"type":1,"start":138,"end":144},{"type":1,"start":159,"end":172},{"type":1,"start":216,"end":228},{"type":1,"start":234,"end":246},{"type":1,"start":250,"end":261},{"type":1,"start":331,"end":333},{"type":1,"start":348,"end":361}]},{"name":"f776","type":1,"text":"These clever matching rules would be difficult to implement with the same regular expression-based approach of the old Quick Switcher, so querying is now modelled as a graph search. Each letter in a channel or member name is a node in the graph, with weighted edges to the following letter and to the beginning of other substrings. Edges that jump to other substrings have a larger weight than edges between adjacent nodes. We then look for a path through the graph using the letters in the query. The weights of the edges followed are summed up and used for sorting. This approach gives us a lot of room to tune the “fuzziness” of the Quick Switcher over time.","markups":[]},{"name":"6be2","type":1,"text":"We also took the opportunity to consolidate the Quick Switcher’s rules for searching and sorting into reusable modules. This is the first step towards ensuring that all the filters, type-aheads and autocompletes in Slack work the same way.","markups":[]},{"name":"1ff5","type":13,"text":"A little better every day","markups":[]},{"name":"8d1b","type":1,"text":"The Quick Switcher now gets better every time you use it. Our efforts required a rewrite, but it was a thoughtful one. We left intact the interface, interaction, and special case handling that our customers are used to (like offering to create a channel when you don’t find any matches) while focusing on improvements to performance and search and sort behavior to make the experience more pleasant. We’re eager to bring these new capabilities to our mobile apps and to other parts of our UI.","markups":[]},{"name":"16b2","type":1,"text":"1) The Mozilla algorithm is documented on MDN.","markups":[{"type":3,"start":28,"end":45,"href":"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places/Frecency_algorithm","title":"","rel":"","anchorType":0},{"type":1,"start":0,"end":3}]},{"name":"dd48","type":1,"text":"2) We listened, Ram.","markups":[{"type":3,"start":3,"end":19,"href":"http://blog.ram.rachum.com/post/33095461928/developers-when-using-frecency-please-consider","title":"","rel":"","anchorType":0},{"type":1,"start":0,"end":3}]}],"sections":[{"name":"3689","startIndex":0},{"name":"c753","startIndex":10},{"name":"b64a","startIndex":43},{"name":"aaa1","startIndex":48},{"name":"1efe","startIndex":50}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","createdAtRelative":"21 days ago","updatedAtRelative":"4 days ago","acceptedAtRelative":"","createdAtEnglish":"January 13, 2016","updatedAtEnglish":"January 30, 2016","acceptedAtEnglish":"","firstPublishedAtEnglish":"January 25, 2016","latestPublishedAtEnglish":"January 27, 2016","allowNotes":true,"snippet":"We rewrote the Quick Switcher to dramatically improve performance and make it a whole lot easier to use. Here’s what we learned.","previewImage":{"imageId":"1*VfY_n9_DS42MrbCrKpZEXw.jpeg","filter":"","backgroundSize":"","originalWidth":3916,"originalHeight":1669,"strategy":"resample","height":0,"width":0},"wordCount":1730,"imageCount":4,"readingTime":7.228301886792453,"subtitle":"We rewrote the Quick Switcher to dramatically improve performance and make it a whole lot easier to use. Here’s what we learned.","publishedInCount":1,"usersBySocialRecommends":[],"latestPublishedAtAbbreviated":"Jan 27","firstPublishedAtAbbreviated":"Jan 25","emailSnippet":"By Diogenes Brito, Patrick Kane, Johnny Rodgers, and Kyle Stetz. ¶\n\nGetting to the right conversation in Slack should be easy. And it should be fast. Like, really fast. When we first released the Quick Switcher in early 2014, we aimed to provide a way to quickly and easily switch to any channel or direct message you wanted. It was keyboard accessible (just press ⌘+k on Mac or ctrl+k on Windows and Linux) and it made power users happy.","recommends":189,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"javascript","name":"JavaScript","postCount":7980,"virtuals":{"isFollowing":false,"newTopStoriesCount":0},"metadata":{"followerCount":7579,"postCount":7980,"coverImage":{"id":"1*bcZz-qb_DNpvrNNwQBhQmQ.jpeg","originalWidth":1024,"originalHeight":586}},"type":"Tag"},{"slug":"slack","name":"Slack","postCount":1091,"virtuals":{"isFollowing":false,"newTopStoriesCount":0},"metadata":{"followerCount":267,"postCount":1091,"coverImage":{"id":"1*fOWC4-n-hGzSea72E1TKgg.gif","originalWidth":576,"originalHeight":324}},"type":"Tag"},{"slug":"algorithms","name":"Algorithms","postCount":359,"virtuals":{"isFollowing":false,"newTopStoriesCount":0},"metadata":{"followerCount":529,"postCount":359,"coverImage":{"id":"0*0sbuAC2FMy2_jma6.","originalWidth":1052,"originalHeight":867}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":5},"coverless":true,"slug":"a-faster-smarter-quick-switcher","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"isViewed":false,"uniqueSlug":"a-faster-smarter-quick-switcher-77cbc193cb60","previewContent":{"bodyModel":{"paragraphs":[{"name":"229a","type":4,"text":"","markups":[{"type":3,"start":0,"end":8,"href":"https://www.flickr.com/photos/joi/494430235/","title":"","rel":"","anchorType":0},{"type":3,"start":35,"end":51,"href":"https://creativecommons.org/licenses/by/2.0/","title":"","rel":"","anchorType":0}],"layout":10,"metadata":{"id":"1*VfY_n9_DS42MrbCrKpZEXw.jpeg","originalWidth":3916,"originalHeight":1669}},{"name":"2763","type":3,"text":"A faster, smarter Quick Switcher","markups":[],"alignment":1},{"name":"7e16","type":1,"text":"By Diogenes Brito, Patrick Kane, Johnny Rodgers, and Kyle Stetz.","markups":[{"type":3,"start":3,"end":17,"anchorType":2,"userId":"7d14046f418e"},{"type":3,"start":19,"end":31,"anchorType":2,"userId":"649dd4575453"},{"type":3,"start":33,"end":47,"anchorType":2,"userId":"3297dadd8b70"},{"type":3,"start":53,"end":63,"anchorType":2,"userId":"4eea65c5f388"}],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60","approvedHomeCollectionId":"58820b6d8904","approvedHomeCollection":{"id":"58820b6d8904","name":"Several People Are Coding","slug":"several-people-are-coding","tags":[],"creatorId":"e422a547344","description":"The Slack Engineering Blog","shortDescription":"The Slack Engineering Blog","image":{"imageId":"1*1mPvixjECYE4qm2L1EoNtA.png","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":189,"postCount":1,"activeAt":1453748919526},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false},"isSubscribed":false,"isNewsletterSubscribed":false},"logo":{"imageId":"1*SWg0qbhf5Y8M-KFU0diqvA.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":72,"strategy":"resample","height":0,"width":0},"twitterUsername":"","facebookPageName":"","publicEmail":"","collectionMastheadId":"fd74c3cc70ed","domain":"slack.engineering","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Several People Are Coding","description":"The Slack Engineering Blog","backgroundImage":{"id":"","originalWidth":0,"originalHeight":0,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"logoImage":{"id":"1*SelRlfZgYmKP0fzjuJxHFQ.png","originalWidth":350,"originalHeight":160,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"alignment":1,"layout":1}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":4,"postIds":[],"tagSlug":"","posts":[]}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":5,"postIds":[],"tagSlug":"","posts":[]}}],"type":"Collection"},"newsletterId":"","webCanonicalUrl":"https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60","mediumUrl":"https://slack.engineering/a-faster-smarter-quick-switcher-77cbc193cb60","type":"Post","_isPopulated":true},"collaborators":[{"user":{"userId":"e422a547344","name":"Ross Harmes","username":"rharmes","createdAt":1344986109060,"lastPostCreatedAt":1446759370427,"imageId":"0*uOAYO5d4XyTsssT9.jpg","backgroundImageId":"","bio":"","twitterScreenName":"rharmes","facebookAccountId":"","allowNotes":1,"type":"User"},"state":"visible","_isPopulated":true},{"user":{"userId":"7d14046f418e","name":"Diogenes Brito","username":"uxdiogenes","createdAt":1345042287110,"lastPostCreatedAt":1445838506171,"imageId":"0*Y_PTuLxa8YkN1WoE.png","backgroundImageId":"","bio":"A craftsman of order and clarity. Product Designer @SlackHQ (slack.com). Formerly a designer and engineer @Squarespace, UX @LinkedIn. http://uxdiogenes.com","twitterScreenName":"uxdiogenes","facebookAccountId":"10202217141854890","allowNotes":1,"type":"User"},"state":"visible","_isPopulated":true}],"enableTipJar":0,"footerPromo":{"promoId":"read_next_sign_in_tnt","isDismissable":false,"imageId":"1*OlgaspZ00W78xQY-HE9Wsg.png"},"collectionUserRelations":[],"mode":null,"references":{"User":{"28279a71b4f2":{"userId":"28279a71b4f2","name":"Slack Engineering","username":"SlackEng","createdAt":1452727478734,"lastPostCreatedAt":1454348532813,"imageId":"1*GB9girro1GFX16imhDm_wA.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"28279a71b4f2","usersFollowedCount":1,"usersFollowedByCount":203,"type":"SocialStats"},"social":{"userId":"lo_fc871eba2ce1","targetUserId":"28279a71b4f2","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"}},"Collection":{"58820b6d8904":{"id":"58820b6d8904","name":"Several People Are Coding","slug":"several-people-are-coding","tags":[],"creatorId":"e422a547344","description":"The Slack Engineering Blog","shortDescription":"The Slack Engineering Blog","image":{"imageId":"1*1mPvixjECYE4qm2L1EoNtA.png","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":189,"postCount":1,"activeAt":1453748919526},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false},"isSubscribed":false,"isNewsletterSubscribed":false},"logo":{"imageId":"1*SWg0qbhf5Y8M-KFU0diqvA.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":72,"strategy":"resample","height":0,"width":0},"twitterUsername":"","facebookPageName":"","publicEmail":"","collectionMastheadId":"fd74c3cc70ed","domain":"slack.engineering","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Several People Are Coding","description":"The Slack Engineering Blog","backgroundImage":{"id":"","originalWidth":0,"originalHeight":0,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"logoImage":{"id":"1*SelRlfZgYmKP0fzjuJxHFQ.png","originalWidth":350,"originalHeight":160,"backgroundSize":"","filter":"","isFeatured":false,"externalSrc":"","focusPercentX":-1,"focusPercentY":-1},"alignment":1,"layout":1}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":4,"postIds":[],"tagSlug":"","posts":[]}},{"type":1,"postListMetadata":{"source":1,"layout":6,"number":5,"postIds":[],"tagSlug":"","posts":[]}}],"type":"Collection"}},"Social":{"28279a71b4f2":{"userId":"lo_fc871eba2ce1","targetUserId":"28279a71b4f2","type":"Social"}},"SocialStats":{"28279a71b4f2":{"userId":"28279a71b4f2","usersFollowedCount":1,"usersFollowedByCount":203,"type":"SocialStats"}}}})
      // ]]>
    </script>
  </body>
</html>
